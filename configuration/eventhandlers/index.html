<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Event Handlers - Conductor</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../css/custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Event Handlers";
    var mkdocs_page_input_path = "configuration/eventhandlers.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Conductor</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../server/">Installing Conductor Locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../running-locally-docker/">Installing via Docker Compose</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/basicconcepts/">Basic Concepts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/client/">Using the Client</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/startworkflow/">Start a Workflow</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../taskdef/">Task Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../workerdef/">Worker Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../workflowdef/">Workflow Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../systask/">System Tasks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sysoperator/">System Operators</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Event Handlers</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../taskdomains/">Task Domains</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../isolationgroups/">Isolation Groups</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../apispec/">API Specification</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Operators</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/do-while-task/">Do/While</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/dynamic/">Dynamic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/dynamic-fork-task/">Dynamic Fork</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/fork-task/">Fork</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/join-task/">Join</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/set-variable-task/">Set Variable</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/sub-workflow-task/">Sub Workflow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/switch-task/">Switch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/terminate-task/">Terminate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/wait-task/">Wait</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">System Tasks</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/event-task/">Event Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/http-task/">HTTP Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/inline-task/">Inline Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/json-jq-transform-task/">JSON JQ Transform Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reference-docs/kafka-publish-task/">Kafka Publish Task</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Conductor Metrics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../metrics/server/">Server Metrics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../metrics/client/">Client Metrics</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../extend/">Extending Conductor</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tasklifecycle/">Task Lifecycle</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../externalpayloadstorage/">External Payload Storage</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">How-Tos</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="#">Workflows</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/debugging-workflows/">Debugging Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/handling-errors/">Handliing Errors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/searching-workflows/">Searching Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/starting-workflows/">Starting a Workflow</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/updating-workflows/">Updating Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workflows/view-workflow-executions/">View Workflow Execution</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Tasks</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/creating-tasks/">Creating Task Definitions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/dynamic-vs-switch-tasks/">Dynamic vs Switch Tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/monitoring-task-queues/">Monitoring Task Queues</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/reusing-tasks/">Reusing Tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/task-configurations/">Task Configurations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/task-inputs/">Task Inputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/task-timeouts/">Task Timeouts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Tasks/updating-tasks/">Updating Task Definitions</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Workers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workers/build-a-golang-task-worker/">-Build a Go Task Worker</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workers/build-a-java-task-worker/">-Build a Java Task Worker</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Workers/build-a-python-task-worker/">-Build a Python Task Worker</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Monitoring</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../how-tos/Monitoring/Conductor-LogLevel/">Conductor Log Level</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developer Labs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../labs/beginner/">Beginner</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../labs/running-first-workflow/">A First Workflow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../labs/running-first-worker/">A First Worker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../labs/eventhandlers/">Events and Event Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../labs/kitchensink/">Kitchensink</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../bestpractices/">Best Practices</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../technicaldetails/">Technical Details</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../license/">License</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Conductor</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Configuration &raquo;</li>
        
      
    
    <li>Event Handlers</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Netflix/conductor/edit/main/docs/docs/configuration/eventhandlers.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Eventing in Conductor provides for loose coupling between workflows and support for producing and consuming events from external systems.</p>
<p>This includes:</p>
<ol>
<li>Being able to produce an event (message) in an external system like SQS or internal to Conductor. </li>
<li>Start a workflow when a specific event occurs that matches the provided criteria.</li>
</ol>
<p>Conductor provides SUB_WORKFLOW task that can be used to embed a workflow inside parent workflow.  Eventing supports provides similar capability without explicitly adding dependencies and provides <strong>fire-and-forget</strong> style integrations.</p>
<h2 id="event-task">Event Task<a class="headerlink" href="#event-task" title="Permanent link">&para;</a></h2>
<p>Event task provides ability to publish an event (message) to either Conductor or an external eventing system like SQS. Event tasks are useful for creating event based dependencies for workflows and tasks.</p>
<p>See <a href="../../reference-docs/event-task">Event Task</a> for documentation.</p>
<h2 id="event-handler">Event Handler<a class="headerlink" href="#event-handler" title="Permanent link">&para;</a></h2>
<p>Event handlers are listeners registered that executes an action when a matching event occurs.  The supported actions are:</p>
<ol>
<li>Start a Workflow</li>
<li>Fail a Task</li>
<li>Complete a Task</li>
</ol>
<p>Event Handlers can be configured to listen to Conductor Events or an external event like SQS.</p>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<p>Event Handlers are configured via <code>/event/</code> APIs.</p>
<h4 id="structure">Structure:<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code class="language-json">{
  &quot;name&quot; : &quot;descriptive unique name&quot;,
  &quot;event&quot;: &quot;event_type:event_location&quot;,
  &quot;condition&quot;: &quot;boolean condition&quot;,
  &quot;actions&quot;: [&quot;see examples below&quot;]
}
</code></pre>

<h4 id="condition">Condition<a class="headerlink" href="#condition" title="Permanent link">&para;</a></h4>
<p>Condition is an expression that MUST evaluate to a boolean value.  A Javascript like syntax is supported that can be used to evaluate condition based on the payload.
Actions are executed only when the condition evaluates to <code>true</code>.</p>
<p><strong>Examples</strong></p>
<p>Given the following payload in the message:</p>
<pre class="codehilite"><code class="language-json">{
    &quot;fileType&quot;: &quot;AUDIO&quot;,
    &quot;version&quot;: 3,
    &quot;metadata&quot;: {
       &quot;length&quot;: 300,
       &quot;codec&quot;: &quot;aac&quot;
    }
}
</code></pre>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$.version &gt; 1</code></td>
<td>true</td>
</tr>
<tr>
<td><code>$.version &gt; 10</code></td>
<td>false</td>
</tr>
<tr>
<td><code>$.metadata.length == 300</code></td>
<td>true</td>
</tr>
</tbody>
</table>
<h3 id="actions">Actions<a class="headerlink" href="#actions" title="Permanent link">&para;</a></h3>
<p><strong>Start A Workflow</strong></p>
<pre class="codehilite"><code class="language-json">{
    &quot;action&quot;: &quot;start_workflow&quot;,
    &quot;start_workflow&quot;: {
        &quot;name&quot;: &quot;WORKFLOW_NAME&quot;,
        &quot;version&quot;: &quot;&lt;optional_param&gt;&quot;,
        &quot;input&quot;: {
            &quot;param1&quot;: &quot;${param1}&quot; 
        }
    }
}
</code></pre>

<p><strong>Complete Task</strong>*</p>
<pre class="codehilite"><code class="language-json">{
    &quot;action&quot;: &quot;complete_task&quot;,
    &quot;complete_task&quot;: {
      &quot;workflowId&quot;: &quot;${workflowId}&quot;,
      &quot;taskRefName&quot;: &quot;task_1&quot;,
      &quot;output&quot;: {
        &quot;response&quot;: &quot;${result}&quot;
      }
    },
    &quot;expandInlineJSON&quot;: true
}
</code></pre>

<p><strong>Fail Task</strong>*</p>
<pre class="codehilite"><code class="language-json">{
    &quot;action&quot;: &quot;fail_task&quot;,
    &quot;fail_task&quot;: {
      &quot;workflowId&quot;: &quot;${workflowId}&quot;,
      &quot;taskRefName&quot;: &quot;task_1&quot;,
      &quot;output&quot;: {
        &quot;response&quot;: &quot;${result}&quot;
      }
    },
    &quot;expandInlineJSON&quot;: true
}
</code></pre>

<p>Input for starting a workflow and output when completing / failing task follows the same <a href="/configuration/workflowdef/#wiring-inputs-and-outputs">expressions</a> used for wiring workflow inputs.</p>
<div class="admonition info">
<p class="admonition-title">Expanding stringified JSON elements in payload</p>
<p><code>expandInlineJSON</code> property, when set to true will expand the inlined stringified JSON elements in the payload to JSON documents and replace the string value with JSON document.<br />
This feature allows such elements to be used with JSON path expressions. </p>
</div>
<h2 id="extending">Extending<a class="headerlink" href="#extending" title="Permanent link">&para;</a></h2>
<p>Provide the implementation of <a href="https://github.com/Netflix/conductor/blob/master/core/src/main/java/com/netflix/conductor/core/events/EventQueueProvider.java">EventQueueProvider</a>.</p>
<p>SQS Queue Provider: 
<a href="https://github.com/Netflix/conductor/blob/master/contribs/src/main/java/com/netflix/conductor/core/events/sqs/SQSEventQueueProvider.java">SQSEventQueueProvider.java </a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../taskdomains/" class="btn btn-neutral float-right" title="Task Domains">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sysoperator/" class="btn btn-neutral" title="System Operators"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Netflix/conductor/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../sysoperator/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../taskdomains/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
