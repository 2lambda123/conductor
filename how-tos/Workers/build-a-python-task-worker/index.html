<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>-Build a Python Task Worker - Conductor</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../css/theme.css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../../css/custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "-Build a Python Task Worker";
    var mkdocs_page_input_path = "how-tos/Workers/build-a-python-task-worker.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Conductor</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../architecture/">Architecture</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../server/">Installing Conductor Locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../running-locally-docker/">Installing via Docker Compose</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/basicconcepts/">Basic Concepts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/client/">Using the Client</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/startworkflow/">Start a Workflow</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/taskdef/">Task Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/workerdef/">Worker Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/workflowdef/">Workflow Definition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/systask/">System Tasks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/sysoperator/">System Operators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/eventhandlers/">Event Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/taskdomains/">Task Domains</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../configuration/isolationgroups/">Isolation Groups</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../apispec/">API Specification</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Operators</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/do-while-task/">Do/While</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/dynamic/">Dynamic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/dynamic-fork-task/">Dynamic Fork</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/fork-task/">Fork</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/join-task/">Join</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/set-variable-task/">Set Variable</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/sub-workflow-task/">Sub Workflow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/switch-task/">Switch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/terminate-task/">Terminate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/wait-task/">Wait</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">System Tasks</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/event-task/">Event Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/http-task/">HTTP Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/inline-task/">Inline Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/json-jq-transform-task/">JSON JQ Transform Task</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../reference-docs/kafka-publish-task/">Kafka Publish Task</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Conductor Metrics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../metrics/server/">Server Metrics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../metrics/client/">Client Metrics</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../extend/">Extending Conductor</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../tasklifecycle/">Task Lifecycle</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../externalpayloadstorage/">External Payload Storage</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">How-Tos</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">Workflows</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/debugging-workflows/">Debugging Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/handling-errors/">Handliing Errors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/searching-workflows/">Searching Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/starting-workflows/">Starting a Workflow</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/updating-workflows/">Updating Workflows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Workflows/view-workflow-executions/">View Workflow Execution</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Tasks</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/creating-tasks/">Creating Task Definitions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/dynamic-vs-switch-tasks/">Dynamic vs Switch Tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/monitoring-task-queues/">Monitoring Task Queues</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/reusing-tasks/">Reusing Tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/task-configurations/">Task Configurations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/task-inputs/">Task Inputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/task-timeouts/">Task Timeouts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Tasks/updating-tasks/">Updating Task Definitions</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Workers</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../build-a-golang-task-worker/">-Build a Go Task Worker</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../build-a-java-task-worker/">-Build a Java Task Worker</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">-Build a Python Task Worker</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#install-the-python-client">Install the python client</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#implement-a-task-worker">Implement a Task Worker</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#conductorworker-parameters">ConductorWorker parameters</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#start-method-parameters">start method parameters</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Monitoring</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Monitoring/Conductor-LogLevel/">Conductor Log Level</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developer Labs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../labs/beginner/">Beginner</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../labs/running-first-workflow/">A First Workflow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../labs/running-first-worker/">A First Worker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../labs/eventhandlers/">Events and Event Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../labs/kitchensink/">Kitchensink</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../bestpractices/">Best Practices</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../faq/">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../technicaldetails/">Technical Details</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../license/">License</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Conductor</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>How-Tos &raquo;</li>
        
      
        
          <li>Workers &raquo;</li>
        
      
    
    <li>-Build a Python Task Worker</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Netflix/conductor/edit/main/docs/docs/how-tos/Workers/build-a-python-task-worker.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="build-a-python-task-worker">Build a Python Task Worker<a class="headerlink" href="#build-a-python-task-worker" title="Permanent link">&para;</a></h1>
<h2 id="install-the-python-client">Install the python client<a class="headerlink" href="#install-the-python-client" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code class="language-shell">   virtualenv conductorclient
   source conductorclient/bin/activate
   cd ../conductor/client/python
   python setup.py install
</code></pre>

<h2 id="implement-a-task-worker">Implement a Task Worker<a class="headerlink" href="#implement-a-task-worker" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/Netflix/conductor/blob/main/polyglot-clients/python/conductor/ConductorWorker.py#L36">ConductorWorker</a> 
class is used to implement task workers.
The following script shows how to bring up two task workers named <code>book_flight</code> and <code>book_car</code>:</p>
<pre class="codehilite"><code class="language-python">from __future__ import print_function
from conductor.ConductorWorker import ConductorWorker

def book_flight_task(task):
    return {'status': 'COMPLETED', 'output': {'booking_ref': 2341111, 'airline': 'delta'}, 'logs': ['trying delta', 'skipping aa']}

def book_car_task(task):
    return {'status': 'COMPLETED', 'output': {'booking_ref': &quot;84545fdfd&quot;, 'agency': 'hertz'}, 'logs': ['trying hertz']}

def main():
    print('Starting Travel Booking workflows')
    cc = ConductorWorker('http://localhost:8080/api', 1, 0.1)
    cc.start('book_flight', book_flight_task, False)
    cc.start('book_car', book_car_task, True)

if __name__ == '__main__':
    main()
</code></pre>

<h3 id="conductorworker-parameters"><code>ConductorWorker</code> parameters<a class="headerlink" href="#conductorworker-parameters" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-python">server_url: str
    The url to the server hosting the conductor api.
    Ex: 'http://localhost:8080/api'

thread_count: int
    The number of threads that will be polling for and
    executing tasks in case of using the start method.

polling_interval: float
    The number of seconds that each worker thread will wait
    between polls to the conductor server.

worker_id: str, optional
    The worker_id of the worker that is going to execute the
    task. For further details, refer to the documentation
    By default, it is set to hostname of the machine
</code></pre>

<h3 id="start-method-parameters"><code>start</code> method parameters<a class="headerlink" href="#start-method-parameters" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-pythhon">taskType: str
    The name of the task that the worker is looking to execute

exec_function: function
    The function that the worker will execute. The function
    must return a dict with the `status`, `output` and `logs`
    keys present. If this is not present, an Exception will be
    raised

wait: bool
    Whether the worker will block execution of further code.
    Since the workers are being run in daemon threads, when the
    program completes execution, all the threads are destroyed.
    Setting wait to True prevents the program from ending.
    If multiple workers are being called from the same program,
    all but the last start call but have wait set to False.
    The last start call must always set wait to True. If a
    single worker is being called, set wait to True.

domain: str, optional
    The domain of the task under which the worker will run. For
    further details refer to the conductor server documentation
    By default, it is set to None
</code></pre>

<p>See 
<a href="https://github.com/Netflix/conductor/tree/main/polyglot-clients/python">https://github.com/Netflix/conductor/tree/main/polyglot-clients/python</a>
for the source code.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../Monitoring/Conductor-LogLevel/" class="btn btn-neutral float-right" title="Conductor Log Level">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../build-a-java-task-worker/" class="btn btn-neutral" title="-Build a Java Task Worker"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Netflix/conductor/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../build-a-java-task-worker/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../Monitoring/Conductor-LogLevel/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
